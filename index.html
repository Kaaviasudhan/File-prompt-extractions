<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Code Optimize | Prompt Architect</title>
    <script src="https://js.puter.com/v2/"></script>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Navigation -->
    <nav class="top-nav">
      <div class="nav-container">
        <div class="nav-brand">
          <div class="nav-logo">PA</div>
          <span class="nav-title">Prompt Architect</span>
        </div>
        <div class="nav-links">
          <a href="index.html" class="nav-link active">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="16 18 22 12 16 6"></polyline>
              <polyline points="8 6 2 12 8 18"></polyline>
            </svg>
            Code Optimize
          </a>
          <a href="chat.html" class="nav-link">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
            Chat Optimize
          </a>
        </div>
      </div>
    </nav>

    <div class="container">
      <header>
        <div class="header-left">
          <h1>Code Optimize</h1>
          <p>Advanced Prompt Construction for Engineering Workflows</p>
        </div>
      </header>

      <!-- Puter Info Banner -->
      <div class="puter-info-banner">
        <div class="icon">‚ö°</div>
        <div class="content">
          <h3>Powered by Puter AI - 100% Free, No API Keys Required!</h3>
          <p>Enhance your prompts instantly with state-of-the-art AI models. No sign up, no limits.</p>
        </div>
        <div class="models">
          <div class="model-tag">
            <span class="dot claude"></span>
            claude-opus-4-5
          </div>
          <div class="model-tag">
            <span class="dot openai"></span>
            gpt-5.2-pro
          </div>
        </div>
      </div>

      <div class="main-grid">
        <div class="left-col">
          <!-- System Instructions Card -->
          <div class="card">
            <div class="card-header">
              <h2>System Instructions <span>Persisted Settings</span></h2>
              <div class="header-actions">
                <div class="ai-dropdown-wrapper" id="instructions-ai-wrapper">
                  <button class="ai-enhance-btn" onclick="toggleAIDropdown('instructions')">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
                    </svg>
                    Enhance with AI
                    <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                      <path d="M6 9l6 6 6-6"></path>
                    </svg>
                  </button>
                  <div class="ai-dropdown" id="instructions-dropdown">
                    <div class="ai-dropdown-header">üöÄ Powered by Puter - All Free!</div>
                    <div class="ai-dropdown-item" onclick="enhanceWithAI('instructions', 'claude')">
                      <div class="provider-icon claude">C</div>
                      <div class="provider-info">
                        <div class="provider-name">Claude <span class="free-tag">Free</span></div>
                        <div class="provider-model">claude-opus-4-5</div>
                      </div>
                      <div class="status-dot"></div>
                    </div>
                    <div class="ai-dropdown-item" onclick="enhanceWithAI('instructions', 'openai')">
                      <div class="provider-icon openai">G</div>
                      <div class="provider-info">
                        <div class="provider-name">GPT <span class="free-tag">Free</span></div>
                        <div class="provider-model">gpt-5.2-pro</div>
                      </div>
                      <div class="status-dot"></div>
                    </div>
                  </div>
                </div>
                <button class="btn-ghost" onclick="clearInstructions()">Clear</button>
              </div>
            </div>
            <textarea
              id="instructions"
              placeholder="e.g. 'Act as a Senior SRE. Use dry, technical language...'"
              oninput="updateStats(); saveInstructions();"
            ></textarea>
            <div class="enhancement-bar" id="instructions-enhancement-bar">
              <div class="info">
                <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg>
                <span>Enhanced with <strong id="instructions-provider-used">AI</strong></span>
              </div>
              <div class="actions">
                <button class="btn-redo" onclick="redoEnhancement('instructions')">‚Üª Redo</button>
                <button class="btn-revert" onclick="revertEnhancement('instructions')">Revert</button>
              </div>
            </div>
          </div>

          <!-- Task Context Card -->
          <div class="card" style="margin-top: 24px">
            <div class="card-header">
              <h2>Task Context</h2>
              <div class="header-actions">
                <div class="ai-dropdown-wrapper" id="prompt-ai-wrapper">
                  <button class="ai-enhance-btn" onclick="toggleAIDropdown('prompt')">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
                    </svg>
                    Enhance with AI
                    <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                      <path d="M6 9l6 6 6-6"></path>
                    </svg>
                  </button>
                  <div class="ai-dropdown" id="prompt-dropdown">
                    <div class="ai-dropdown-header">üöÄ Powered by Puter - All Free!</div>
                    <div class="ai-dropdown-item" onclick="enhanceWithAI('prompt', 'claude')">
                      <div class="provider-icon claude">C</div>
                      <div class="provider-info">
                        <div class="provider-name">Claude <span class="free-tag">Free</span></div>
                        <div class="provider-model">claude-opus-4-5</div>
                      </div>
                      <div class="status-dot"></div>
                    </div>
                    <div class="ai-dropdown-item" onclick="enhanceWithAI('prompt', 'openai')">
                      <div class="provider-icon openai">G</div>
                      <div class="provider-info">
                        <div class="provider-name">GPT <span class="free-tag">Free</span></div>
                        <div class="provider-model">gpt-5.2-pro</div>
                      </div>
                      <div class="status-dot"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <textarea id="prompt" placeholder="Describe the specific problem..." oninput="updateStats()"></textarea>
            <div class="enhancement-bar" id="prompt-enhancement-bar">
              <div class="info">
                <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg>
                <span>Enhanced with <strong id="prompt-provider-used">AI</strong></span>
              </div>
              <div class="actions">
                <button class="btn-redo" onclick="redoEnhancement('prompt')">‚Üª Redo</button>
                <button class="btn-revert" onclick="revertEnhancement('prompt')">Revert</button>
              </div>
            </div>

            <div class="file-input-wrapper" id="dropZone">
              <span id="file-label">üìÅ Drag & drop files or click to upload (Add multiple files)</span>
              <input type="file" id="files" multiple onchange="handleFileUpload()" />
            </div>

            <div class="file-section" id="file-section" style="display: none">
              <div class="file-list-header">
                <span id="file-count">0 files attached</span>
                <button class="clear-all-files" onclick="clearAllFiles()">Clear All Files</button>
              </div>
              <div class="file-list" id="file-list"></div>
            </div>

            <div class="status-bar">
              <span id="char-count">0 characters</span>
              <span>‚åò/Ctrl+Enter to Run</span>
            </div>
          </div>
        </div>

        <div class="right-col">
          <div class="card">
            <div class="card-header">
              <h2>Final Payload</h2>
            </div>
            <textarea id="output" readonly placeholder="Output will appear here..."></textarea>
            <div class="actions">
              <button class="btn-primary" onclick="generateOutput()">Generate Prompt</button>
              <button class="btn-secondary" onclick="copyOutput()">Copy All</button>
              <button class="btn-secondary" style="margin-left: auto; color: var(--danger)" onclick="clearAll()">Reset All</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="toast" class="copy-toast">Copied to clipboard!</div>

    <footer>
      <div class="footer-compact">
        <div class="footer-left">
          <div class="mini-logo">PA</div>
          <div class="brand-meta">Prompt Architect <span>v4.0.0</span></div>
        </div>

        <nav class="footer-center-links">
          <a
            href="https://github.com/Kaaviasudhan/File-prompt-extractions"
            target="_blank"
            class="icon-link"
            title="GitHub"
          >
            <svg viewBox="0 0 24 24">
              <path
                d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"
              />
            </svg>
          </a>
          <a
            href="https://github.com/Kaaviasudhan/File-prompt-extractions/stargazers"
            target="_blank"
            class="icon-link"
            title="Star"
          >
            <svg viewBox="0 0 24 24">
              <path
                d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"
              />
            </svg>
          </a>
          <a
            href="https://developer.puter.com"
            target="_blank"
            class="icon-link"
            title="Puter"
          >
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"
              />
            </svg>
          </a>
          <a
            href="https://github.com/Kaaviasudhan/File-prompt-extractions/issues"
            target="_blank"
            class="icon-link"
            title="Issues"
          >
            <svg viewBox="0 0 24 24">
              <path
                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"
              />
            </svg>
          </a>
        </nav>

        <div class="footer-right">
          <span
            >Made with <span class="heart-mini">‚ù§</span> by <b>@sudhan</b></span
          >
          <span>‚Ä¢</span>
          <span>¬© 2026</span>
        </div>
      </div>
    </footer>

    <script src="scripts.js"></script>
  </body>
</html>